
-- Добавляем задачи повышенного уровня сложности
INSERT INTO problems (title, problem_text, solution, difficulty) VALUES 
(
  'Операции с бесконечными множествами',
  'Дано множество A = {x ∈ ℝ | x² - 5x + 6 ≤ 0} и множество B = {x ∈ ℝ | |x - 2| < 3}. Найдите A ∩ B, A ∪ B и A \ B.',
  ARRAY[
    'Найдем множество A: x² - 5x + 6 ≤ 0',
    'Разложим квадратный трехчлен: (x - 2)(x - 3) ≤ 0',
    'Решением является промежуток [2; 3]',
    'Найдем множество B: |x - 2| < 3',
    'Это означает -3 < x - 2 < 3, откуда -1 < x < 5',
    'Множество B = (-1; 5)',
    'A ∩ B = [2; 3] ∩ (-1; 5) = [2; 3]',
    'A ∪ B = [2; 3] ∪ (-1; 5) = (-1; 5)',
    'A \ B = [2; 3] \ (-1; 5) = ∅ (пустое множество)'
  ],
  'hard'
),
(
  'Мощность декартова произведения',
  'Множество A содержит все двузначные числа, кратные 3. Множество B содержит все однозначные простые числа. Найдите мощность множества A × B и приведите три элемента этого произведения.',
  ARRAY[
    'Найдем множество A - двузначные числа, кратные 3: {12, 15, 18, ..., 99}',
    'Первое двузначное число, кратное 3: 12 = 3 × 4',
    'Последнее двузначное число, кратное 3: 99 = 3 × 33',
    'Количество элементов в A: 33 - 4 + 1 = 30',
    'Найдем множество B - однозначные простые числа: {2, 3, 5, 7}',
    'Мощность множества B равна 4',
    'Мощность декартова произведения |A × B| = |A| × |B| = 30 × 4 = 120',
    'Примеры элементов A × B: (12, 2), (15, 7), (99, 5)'
  ],
  'hard'
),
(
  'Разбиение множества на классы эквивалентности',
  'На множестве Z определено отношение эквивалентности: a ~ b, если a - b делится на 5. Найдите все классы эквивалентности и определите, к какому классу относится число -13.',
  ARRAY[
    'Отношение a ~ b означает, что (a - b) ≡ 0 (mod 5)',
    'Это означает, что a ≡ b (mod 5)',
    'Классы эквивалентности определяются остатками при делении на 5',
    'Класс [0] = {..., -10, -5, 0, 5, 10, ...}',
    'Класс [1] = {..., -9, -4, 1, 6, 11, ...}',
    'Класс [2] = {..., -8, -3, 2, 7, 12, ...}',
    'Класс [3] = {..., -7, -2, 3, 8, 13, ...}',
    'Класс [4] = {..., -6, -1, 4, 9, 14, ...}',
    'Для числа -13: -13 = 5 × (-3) + 2, значит -13 ≡ 2 (mod 5)',
    'Число -13 относится к классу [2]'
  ],
  'hard'
),
(
  'Функция как множество упорядоченных пар',
  'Дано множество A = {1, 2, 3} и B = {a, b}. Сколько различных функций f: A → B существует? Постройте одну биективную функцию и объясните, почему биекция невозможна.',
  ARRAY[
    'Функция f: A → B - это множество упорядоченных пар (x, y), где x ∈ A, y ∈ B',
    'Для каждого элемента из A должно быть ровно одно значение в B',
    'Элемент 1 может отображаться в a или b (2 варианта)',
    'Элемент 2 может отображаться в a или b (2 варианта)',
    'Элемент 3 может отображаться в a или b (2 варианта)',
    'Общее количество функций: 2³ = 8',
    'Пример функции: f = {(1,a), (2,b), (3,a)}',
    'Биекция невозможна, так как |A| = 3 > 2 = |B|',
    'Для биекции необходимо равенство мощностей множеств'
  ],
  'hard'
),
(
  'Принцип включений и исключений',
  'В классе из 30 учеников 18 изучают английский язык, 16 изучают немецкий, 14 изучают французский. 8 учеников изучают английский и немецкий, 7 - английский и французский, 5 - немецкий и французский. 3 ученика изучают все три языка. Сколько учеников не изучают ни одного из этих языков?',
  ARRAY[
    'Обозначим: A - английский, B - немецкий, C - французский',
    'Дано: |A| = 18, |B| = 16, |C| = 14',
    '|A ∩ B| = 8, |A ∩ C| = 7, |B ∩ C| = 5',
    '|A ∩ B ∩ C| = 3',
    'По принципу включений-исключений:',
    '|A ∪ B ∪ C| = |A| + |B| + |C| - |A ∩ B| - |A ∩ C| - |B ∩ C| + |A ∩ B ∩ C|',
    '|A ∪ B ∪ C| = 18 + 16 + 14 - 8 - 7 - 5 + 3 = 31',
    'Но в классе только 30 учеников, проверим корректность данных',
    'Количество учеников, не изучающих языки = 30 - 31 = -1',
    'Получается противоречие, возможно в условии ошибка, либо |A ∪ B ∪ C| = 30'
  ],
  'hard'
),
(
  'Булеан множества',
  'Дано множество A = {1, {2}, 3}. Найдите булеан P(A) и определите его мощность. Какие из следующих утверждений верны: 1 ∈ P(A), {1} ∈ P(A), {{2}} ∈ P(A)?',
  ARRAY[
    'Булеан P(A) - множество всех подмножеств множества A',
    'A = {1, {2}, 3}, где элементами являются: 1, {2}, 3',
    'Подмножества A:',
    '∅ (пустое множество)',
    '{1}',
    '{{2}}',
    '{3}',
    '{1, {2}}',
    '{1, 3}',
    '{{2}, 3}',
    '{1, {2}, 3} = A',
    'P(A) = {∅, {1}, {{2}}, {3}, {1, {2}}, {1, 3}, {{2}, 3}, {1, {2}, 3}}',
    'Мощность |P(A)| = 2³ = 8',
    'Проверка утверждений:',
    '1 ∈ P(A) - ЛОЖЬ (1 не является подмножеством A)',
    '{1} ∈ P(A) - ИСТИНА ({1} является подмножеством A)',
    '{{2}} ∈ P(A) - ИСТИНА ({{2}} является подмножеством A)'
  ],
  'hard'
),
(
  'Индукция на множествах',
  'Докажите, что для любого конечного множества A с мощностью n ≥ 0 количество его подмножеств четной мощности равно количеству подмножеств нечетной мощности, если n > 0.',
  ARRAY[
    'Обозначим E(A) - количество подмножеств четной мощности',
    'O(A) - количество подмножеств нечетной мощности',
    'Докажем методом математической индукции',
    'База: n = 1, A = {a}',
    'Подмножества: ∅ (мощность 0), {a} (мощность 1)',
    'E(A) = 1, O(A) = 1, E(A) = O(A) ✓',
    'Переход: пусть утверждение верно для |A| = k',
    'Рассмотрим множество B = A ∪ {x}, где x ∉ A, |B| = k + 1',
    'Подмножества B делятся на два типа:',
    '1) Не содержащие x (это подмножества A)',
    '2) Содержащие x (вида S ∪ {x}, где S ⊆ A)',
    'Для типа 2: четность мощности S ∪ {x} противоположна четности |S|',
    'По предположению индукции: E(A) = O(A)',
    'Значит: E(B) = E(A) + O(A) = O(A) + E(A) = O(B)'
  ],
  'hard'
),
(
  'Мощность счетных множеств',
  'Докажите, что множество Q положительных рациональных чисел счетно. Предложите способ нумерации элементов этого множества.',
  ARRAY[
    'Нужно показать биекцию между Q⁺ и ℕ',
    'Представим рациональное число как несократимую дробь p/q',
    'где p, q ∈ ℕ, НОД(p,q) = 1',
    'Расположим дроби в таблице: строки по знаменателю q, столбцы по числителю p',
    'Строка 1: 1/1',
    'Строка 2: 1/2, 2/2',
    'Строка 3: 1/3, 2/3, 3/3',
    'И так далее',
    'Исключаем сократимые дроби (например, 2/2, 2/4, 3/6)',
    'Нумеруем по диагоналям: 1/1→1/2→2/1→1/3→2/2→3/1→...',
    'Пропускаем сократимые дроби',
    'Получаем последовательность: 1/1, 1/2, 2/1, 1/3, 3/1, 1/4, 2/3, 3/2, 4/1, ...',
    'Это задает биекцию ℕ → Q⁺, следовательно Q⁺ счетно'
  ],
  'hard'
),
(
  'Отношения на множествах',
  'На множестве A = {1, 2, 3, 4, 5, 6} определено отношение R: aRb ⟺ a делит b. Найдите транзитивное замыкание отношения R* и определите, является ли оно отношением порядка.',
  ARRAY[
    'Отношение R: a делит b означает b = ka для некоторого k ∈ ℕ',
    'Исходные пары отношения R:',
    '(1,1), (1,2), (1,3), (1,4), (1,5), (1,6)',
    '(2,2), (2,4), (2,6)',
    '(3,3), (3,6)',
    '(4,4), (5,5), (6,6)',
    'Отношение уже транзитивно: если aRb и bRc, то aRc',
    'Это следует из свойства делимости',
    'Поэтому R* = R',
    'Проверим свойства отношения порядка:',
    '1) Рефлексивность: aRa для всех a ∈ A ✓',
    '2) Антисимметричность: если aRb и bRa, то a = b ✓',
    '3) Транзитивность: если aRb и bRc, то aRc ✓',
    'R является отношением частичного порядка на A'
  ],
  'hard'
),
(
  'Кардинальная арифметика',
  'Сравните мощности множеств: A = ℕ × ℕ, B = множество всех конечных подмножеств ℕ, C = множество всех функций из ℕ в {0,1}. Какое из них имеет наибольшую мощность?',
  ARRAY[
    'Найдем мощность множества A = ℕ × ℕ',
    'Используем диагональную нумерацию Кантора',
    'Пары (m,n) нумеруются как k = (m+n)(m+n+1)/2 + n',
    'Это дает биекцию ℕ × ℕ → ℕ',
    'Следовательно, |A| = ℵ₀ (счетно)',
    'Найдем мощность множества B (конечные подмножества ℕ)',
    'Каждое конечное подмножество можно записать как {n₁, n₂, ..., nₖ}',
    'Количество k-элементных подмножеств ℕ счетно для каждого k',
    'Объединение счетного числа счетных множеств счетно',
    'Следовательно, |B| = ℵ₀',
    'Найдем мощность множества C (функции ℕ → {0,1})',
    'Каждая функция f: ℕ → {0,1} задает бесконечную последовательность 0 и 1',
    'Это эквивалентно множеству всех подмножеств ℕ',
    'По теореме Кантора |C| = 2^ℵ₀ = 𝔠 (континуум)',
    'Наибольшую мощность имеет множество C'
  ],
  'hard'
),
(
  'Топологические множества',
  'В метрическом пространстве (ℝ, d), где d(x,y) = |x-y|, рассмотрите множество A = {1/n | n ∈ ℕ} ∪ {0}. Найдите внутренность int(A), замыкание cl(A) и границу ∂A.',
  ARRAY[
    'Множество A = {1, 1/2, 1/3, 1/4, ..., 0}',
    'Найдем внутренность int(A):',
    'Внутренность состоит из внутренних точек',
    'Точка x внутренняя, если ∃ε > 0: B(x,ε) ⊆ A',
    'Для любой точки 1/n существует точка 1/(n+1) < 1/n',
    'Любая окрестность точки 1/n содержит точки не из A',
    'Аналогично для точки 0',
    'Следовательно, int(A) = ∅',
    'Найдем замыкание cl(A):',
    'Точка предельная, если любая ее окрестность содержит точки A',
    'Последовательность 1/n → 0 при n → ∞',
    'Значит 0 - предельная точка A',
    'Все точки 1/n изолированы (не предельные)',
    'cl(A) = A ∪ {предельные точки} = A = {1/n | n ∈ ℕ} ∪ {0}',
    'Граница ∂A = cl(A) \ int(A) = A \ ∅ = A'
  ],
  'hard'
),
(
  'Алгебра множеств с дополнениями',
  'В универсальном множестве U = {1,2,3,4,5,6,7,8,9,10} даны множества A = {1,3,5,7,9}, B = {2,4,6,8,10}, C = {1,2,3,4,5}. Найдите (A∪B)′∩(A∩C)′ и упростите выражение.',
  ARRAY[
    'Дано: U = {1,2,3,4,5,6,7,8,9,10}',
    'A = {1,3,5,7,9}, B = {2,4,6,8,10}, C = {1,2,3,4,5}',
    'Найдем A ∪ B:',
    'A ∪ B = {1,3,5,7,9} ∪ {2,4,6,8,10} = {1,2,3,4,5,6,7,8,9,10} = U',
    'Тогда (A ∪ B)′ = U′ = ∅',
    'Найдем A ∩ C:',
    'A ∩ C = {1,3,5,7,9} ∩ {1,2,3,4,5} = {1,3,5}',
    'Тогда (A ∩ C)′ = {1,3,5}′ = {2,4,6,7,8,9,10}',
    'Найдем (A∪B)′∩(A∩C)′:',
    '∅ ∩ {2,4,6,7,8,9,10} = ∅',
    'Упрощение: так как A и B дополняют друг друга в U,',
    'то A ∪ B = U, откуда (A ∪ B)′ = ∅',
    'Результат: (A∪B)′∩(A∩C)′ = ∅'
  ],
  'medium'
),
(
  'Свойства симметрической разности',
  'Докажите, что для любых множеств A, B, C выполняется свойство ассоциативности симметрической разности: (A ⊕ B) ⊕ C = A ⊕ (B ⊕ C), где A ⊕ B = (A \ B) ∪ (B \ A).',
  ARRAY[
    'Симметрическая разность: A ⊕ B = (A \ B) ∪ (B \ A)',
    'Эквивалентно: A ⊕ B = (A ∪ B) \ (A ∩ B)',
    'Докажем ассоциативность через характеристические функции',
    'Пусть χ_A(x) = 1, если x ∈ A, и 0 иначе',
    'Тогда χ_{A⊕B}(x) = χ_A(x) + χ_B(x) (mod 2)',
    'Для левой части:',
    'χ_{(A⊕B)⊕C}(x) = χ_{A⊕B}(x) + χ_C(x) (mod 2)',
    '= χ_A(x) + χ_B(x) + χ_C(x) (mod 2)',
    'Для правой части:',
    'χ_{A⊕(B⊕C)}(x) = χ_A(x) + χ_{B⊕C}(x) (mod 2)',
    '= χ_A(x) + χ_B(x) + χ_C(x) (mod 2)',
    'Левая и правая части равны',
    'Следовательно, (A ⊕ B) ⊕ C = A ⊕ (B ⊕ C)'
  ],
  'hard'
);
